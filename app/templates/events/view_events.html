{% extends 'base.html' %}
{% block content %}
<h2>Events</h2>
<a class="btn btn-primary" href="{{ url_for('event.create_event') }}">Create Event</a>
<form method="get" class="form-inline mt-2">
    <select name="type" class="form-control">
        <option value="">All Types</option>
        {% for val, label in event_types %}
            <option value="{{ val }}" {% if event_type == val %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
    </select>
    <button type="submit" class="btn btn-secondary ml-2">Filter</button>
</form>
<div class="table-responsive">
<table class="table mt-3">
    <thead>
        <tr><th>Name</th><th>Type</th><th>Start</th><th>End</th><th>Closed</th><th></th></tr>
    </thead>
    <tbody>
    {% for e in events %}
        <tr>
            <td>{{ e.name }}</td>
            <td>{{ type_labels.get(e.event_type, e.event_type) }}</td>
            <td>{{ e.start_date }}</td>
            <td>{{ e.end_date }}</td>
            <td>{{ 'Yes' if e.closed else 'No' }}</td>
            <td>
                <a href="{{ url_for('event.view_event', event_id=e.id) }}">View</a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}
