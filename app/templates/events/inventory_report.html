{% extends 'base.html' %}
{% block content %}
<h1>Inventory Report - {{ event.name }}</h1>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Location</th>
      <th>Item</th>
      <th>Expected</th>
      <th>Actual</th>
      <th>Variance</th>
      <th>GL Code</th>
      <th>Cost</th>
    </tr>
  </thead>
  <tbody>
    {% for row in rows %}
    <tr>
      <td>{{ row.location.name }}</td>
      <td>{{ row.item.name }}</td>
      <td>{{ row.expected }}</td>
      <td>{{ row.actual }}</td>
      <td>{{ row.variance }}</td>
      <td>{{ row.gl_code }}</td>
      <td>{{ '%.2f'|format(row.cost_total) }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<h2>Totals by GL Code</h2>
<table class="table table-striped">
  <thead>
    <tr><th>GL Code</th><th>Total Cost</th></tr>
  </thead>
  <tbody>
    {% for code, total in gl_totals.items() %}
    <tr><td>{{ code }}</td><td>{{ '%.2f'|format(total) }}</td></tr>
    {% endfor %}
    <tr><th>Grand Total</th><th>{{ '%.2f'|format(grand_total) }}</th></tr>
  </tbody>
</table>
{% endblock %}
