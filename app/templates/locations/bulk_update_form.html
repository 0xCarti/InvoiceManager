<form method="post">
    {{ form.hidden_tag() }}
    {{ form.selected_ids }}
    {% if form.form_errors %}
    <div class="alert alert-danger">
        <ul class="mb-0">
            {% for error in form.form_errors %}
            <li>{{ error }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    <div class="row align-items-center mb-3">
        <div class="col-md-3">
            <div class="form-check form-switch">
                {{ form.apply_name(class_='form-check-input', id='bulk-location-apply-name', **{'data-toggle-target': '#bulk-location-name'}) }}
                <label class="form-check-label" for="bulk-location-apply-name">Update Name</label>
            </div>
        </div>
        <div class="col-md-9">
            <label class="form-label" for="bulk-location-name">Location Name</label>
            {{ form.name(class_='form-control' + (' is-invalid' if form.name.errors else ''), id='bulk-location-name') }}
            {% for error in form.name.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
            {% endfor %}
        </div>
    </div>
    <div class="row align-items-center mb-3">
        <div class="col-md-3">
            <div class="form-check form-switch">
                {{ form.apply_menu_id(class_='form-check-input', id='bulk-location-apply-menu', **{'data-toggle-target': '#bulk-location-menu'}) }}
                <label class="form-check-label" for="bulk-location-apply-menu">Update Menu</label>
            </div>
        </div>
        <div class="col-md-9">
            <label class="form-label" for="bulk-location-menu">Menu</label>
            {{ form.menu_id(class_='form-select' + (' is-invalid' if form.menu_id.errors else ''), id='bulk-location-menu') }}
            {% for error in form.menu_id.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
            {% endfor %}
        </div>
    </div>
    <div class="row align-items-center mb-3">
        <div class="col-md-3">
            <div class="form-check form-switch">
                {{ form.apply_is_spoilage(class_='form-check-input', id='bulk-location-apply-spoilage', **{'data-toggle-target': '#bulk-location-spoilage'}) }}
                <label class="form-check-label" for="bulk-location-apply-spoilage">Update Spoilage Flag</label>
            </div>
        </div>
        <div class="col-md-9">
            <div class="form-check">
                {{ form.is_spoilage(class_='form-check-input', id='bulk-location-spoilage') }}
                <label class="form-check-label" for="bulk-location-spoilage">Spoilage Location</label>
            </div>
        </div>
    </div>
    <div class="row align-items-center mb-3">
        <div class="col-md-3">
            <div class="form-check form-switch">
                {{ form.apply_archived(class_='form-check-input', id='bulk-location-apply-archived', **{'data-toggle-target': '#bulk-location-archived'}) }}
                <label class="form-check-label" for="bulk-location-apply-archived">Update Archived</label>
            </div>
        </div>
        <div class="col-md-9">
            <div class="form-check">
                {{ form.archived(class_='form-check-input', id='bulk-location-archived') }}
                <label class="form-check-label" for="bulk-location-archived">Archived</label>
            </div>
        </div>
    </div>
    <div class="text-end">
        {{ form.submit(class_='btn btn-primary') }}
    </div>
</form>
<script nonce="{{ csp_nonce }}">
(function() {
    const form = document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.tagName === 'FORM'
        ? document.currentScript.previousElementSibling
        : document.currentScript.closest('form');
    if (!form) {
        return;
    }
    form.querySelectorAll('[data-toggle-target]').forEach(function(toggle) {
        const targetSelector = toggle.getAttribute('data-toggle-target');
        if (!targetSelector) {
            return;
        }
        const field = form.querySelector(targetSelector);
        if (!field) {
            return;
        }
        if (field.tagName === 'SELECT') {
            field.disabled = !toggle.checked;
        } else if (field.type === 'checkbox') {
            field.disabled = !toggle.checked;
        } else {
            field.disabled = !toggle.checked;
        }
        toggle.addEventListener('change', function() {
            field.disabled = !toggle.checked;
        });
    });
})();
</script>
